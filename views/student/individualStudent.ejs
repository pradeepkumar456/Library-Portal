<% layout('layout/boilerplate') %>
  <%- include('../includes/sidebar') %>

    <style>
      .student-img {
        width: 10rem;
        /* 80px */
        height: 10rem;
        /* 80px */
        object-fit: fit;
        /* Ensure image fits inside circle */
        border-radius: 50%;
      }

      .student-img:hover {
        transform: scale(1.1) !important;
        box-shadow: 0 1rem 2rem rgba(0, 0, 0, 0.4) !important;
      }

      /* ===== Avatar (Circular Stylish) ===== */
      .student-avatar {
        width: 140px;
        height: 140px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        font-weight: bold;
        color: #fff;
        margin: 1rem auto;
        background: linear-gradient(135deg, #6a11cb, #2575fc);
        box-shadow: 0 0.8rem 1.5rem rgba(0, 0, 0, 0.3);
        border: 4px solid #fff;
        transition: transform 0.4s ease, box-shadow 0.4s ease;
      }

      .student-avatar:hover {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 1rem 2rem rgba(0, 0, 0, 0.4);
      }

      /* Responsive Avatar */
      @media (max-width: 768px) {
        .student-avatar {
          width: 100px;
          height: 100px;
          font-size: 2rem;
        }
      }
    </style>

    <div class="container my-5">
      <h2 class="text-center text-primary mb-4">Student Details</h2>

      <div class="card shadow-sm mx-auto text-center" style="max-width: 600px; border-radius: 1rem;">

        <% if(student.image.url) { %>
          <!-- If student photo is uploaded -->
          <img src="<%= student.image.url %>" class="rounded-circle mx-auto mt-4 shadow student-img"
            alt="<%= student.name %>">
          <% } else { %>
            <!-- Avatar with first letter of student name -->
            <div class="student-avatar">
              <%= student.name ? student.name.charAt(0).toUpperCase() : "?" %>
            </div>
            <% } %>

              <div class="card-body">
                <h4 class="card-title text-center mb-3">
                  <%= student.name %>
                </h4>
                

                <ul class="list-group list-group-flush text-start">
                  <li class="list-group-item"><strong>Father's Name:</strong>
                    <%= student.fatherName %>
                  </li>
                  <li class="list-group-item"><strong>Email:</strong>
                    <%= student.email %>
                  </li>
                  <li class="list-group-item"><strong>Date of Birth:</strong>
                     <%= student.dob.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }) %>
                  </li>
                  <li class="list-group-item"><strong>Gender:</strong>
                    <%= student.gender %>
                  </li>
                  <li class="list-group-item"><strong>Admission Date:</strong>
                    <%= student.admissionDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }) %>

                  </li>
                  <!-- <li class="list-group-item"><strong>Fee Amount:</strong>
                   
                  </li> -->
                  <li class="list-group-item"><strong>SR No:</strong>
                    <%= student.srNo %>
                  </li>
                  <!-- <li class="list-group-item"><strong>Fee Deposit Date:</strong>
                
                  </li> -->
                  <!-- <li class="list-group-item"><strong>Valid Upto:</strong>
                    
                  </li> -->
                  <li class="list-group-item"><strong>Seat No:</strong>
                    <%= student.seatNumber %>
                  </li>
                  <li class="list-group-item"><strong>Phone:</strong>
                    <%= student.phone || 'N/A' %>
                  </li>
                  <li class="list-group-item"><strong>Address:</strong>
                    <%= student.address || 'N/A' %>, <%= student.city || '' %>
                        <%= student.zipCode || '' %>
                  </li>
                  <li class="list-group-item"><strong>Time Slot:</strong>
                    <%= student.timeSlot %>
                  </li>
                </ul>

                <div class="text-center mt-4 mb-3 d-flex ">
                    <a href="/admin/students/<%= student._id %>/fee/add-fee" class="btn btn-success me-2">Add Fee</a>
                  <a href="/admin/students" class="btn btn-secondary me-2">Back to List</a>
                  <a href="/admin/students/<%= student._id %>/edit" class="btn btn-warning me-2">Edit Student</a>
                   <a href="/admin/students/<%= student._id %>/fee" class="btn btn-danger">Fee History</a>
                </div>
              </div>
      </div>
    </div>