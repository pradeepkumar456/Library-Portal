<% layout('layout/boilerplate') %>

  <div class="container my-5">

    <!-- Student Info Card -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-primary text-white">
        <h3 class="mb-0">Welcome, <%= student.name %>
        </h3>
      </div>
      <div class="card-body">
        <div class="row mb-2">
          <div class="col-md-6"><b>Father's Name:</b>
            <%= student.fatherName %>
          </div>
          <div class="col-md-6"><b>Phone:</b>
            <%= student.phone %>
          </div>
        </div>
        <div class="row mb-2">
          <div class="col-md-6"><b>Seat No:</b>
            <%= student.seatNumber %>
          </div>
          <div class="col-md-6"><b>Time Slot:</b>
            <%= student.timeSlot %>
          </div>
        </div> <div class="row mb-2">
           <div class="col-md-6"><b>Email:</b>
            <%= student.email %>
          </div>
          <div class="col-md-6"><b>Admission Date:</b>
            <%= student.admissionDate.toDateString() %>
          </div>
        </div>
      </div>
    </div>

    <!-- Fee Summary -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-success text-white">
        <h5 class="mb-0">Fee Summary</h5>
      </div>
      <div class="card-body">
        <p><b>Total Paid:</b> ₹<%= totalPaid %>
        </p>

        <% if (latestFee) { %>
          <h6 class="mt-3">Latest Fee</h6>
          <ul class="list-group">
            <li class="list-group-item"><b>Month:</b>
              <%= latestFee.month %>
            </li>
            <li class="list-group-item"><b>Deposit Date:</b>
              <%= latestFee.feeDepositDate.toDateString() %>
            </li>
            <li class="list-group-item"><b>Paid:</b> ₹<%= latestFee.paidAmount %>
            </li>
            <li class="list-group-item"><b>Valid Till:</b>
              <%= latestFee.validTo.toDateString() %>
            </li>

          </ul>
          <% } %>
      </div>
    </div>

    <!-- All Fee Records -->
    <div class="card shadow-sm mb-4">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">All Fee Records</h5>
      </div>
      <div class="card-body table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>Month</th>
              <th>Total Fee</th>
              <th>Paid</th>
              <th>Deposit Date</th>
              <th>Valid Till</th>
            </tr>
          </thead>
          <tbody>
            <% fees.forEach(fee=> { %>
              <tr>
                <td>
                  <%= fee.month %>
                </td>
                <td>₹<%= fee.feeAmount %>
                </td>
                <td>₹<%= fee.paidAmount %>
                </td>
                <td>
                  <%= fee.feeDepositDate.toDateString() %>
                </td>
                <td>
                  <%= fee.validTo.toDateString() %>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
      </div>
    </div>
    <div class="d-flex justify-content-center">
      <form action="/student/logout" method="get" class="mx-4">
        <button class="btn btn-outline-primary ">Logout</button>
      </form>
      <form action="/student/change-password" method="get">
        <button class="btn btn-outline-danger ">Change Password</button>
      </form>
    </div>

  </div>